一，分析器
1.接受请求
2.验证用户白名单及是否过期用户
3.验证SQL类型，除了update,insert,delete,其他类型的SQL不允许执行
4.验证SQL长度(单条SQL和多条SQL方式是否考虑不一样)
4.是否关联更新，是否允许关联更新
5.是否允许多条SQL的执行，允许的话,SQL条数的限制
6.对于SQL格式上的错误，是考虑在分析层报错？还是传递给数据库层，由数据库返回错误？
7.explain SQL扫描行数不能超过10000
8.分析器层面只是做一些粗略而简单的检测；语法方面以及sql是否合理并不会验证，这些在explain中可以一一验证。

二，执行器
1.SQL执行
2.执行器本身不区别是哪个环境，由传递的参数决定
3.返回执行结果(正常及异常结果)

三.回退恢复功能
1.更新删除前先，先把每一行的原纪录以json的格式保存
2.执行完成后，生成回退recovery SQL
3.原纪录及回退SQL放在单个回退文件中
4.每次执行都当成一个服务层面的事务，生成一个回退文件
5.以table_name,db_name及当前的unixtime生成一个回退 recovery_id，回退ID可作为回退文件的表名
filewriter+map2json

四.关于回退原理细节
1.delete，先转换成select拉取原数据；再根据逻辑转成insert

2.update,

3.insert：
a.insert into() values()(),可根据values中的条件反查主键，在生成delete
b.insert into select * *,可根据select的条件语句，反差主键，生成delete
c.